import{h as we,u as $e}from"../chunks/global.DC77a2-V.js";import{s as nt,h as rt,n as Me,r as it}from"../chunks/scheduler.Dgi1yRhy.js";import{S as ut,i as ct,e as c,s as y,n as C,c as h,a as b,g as J,k as E,o as k,d as f,l as u,r as H,b as re,m as l,x as et,q as ne,p as X,y as ht,F as ye,E as ot}from"../chunks/index.i9izywSM.js";import{e as Ce}from"../chunks/each.CvcTpb99.js";const _t=async()=>{try{const s=await(await fetch(`http://localhost:3000/api/search/getHouseDetails?house_no=${we}`)).json();if(s.length===0)return{error:"No house data found"};const t=s[0],a=await(await fetch(`http://localhost:3000/api/review/getHouseReview?house_no=${we}`)).json();return{house_no:t.house_no,house_type:t.house_type,house_floor:t.house_floor,block_name:t.block_name,block_city:t.city,rent:t.rent,reviews:a}}catch{return{error:"Failed to load data"}}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:_t},Symbol.toStringTag,{value:"Module"}));function tt(o,s,t){const e=o.slice();return e[4]=s[t],e}function lt(o,s,t){const e=o.slice();return e[14]=s[t],e[16]=t,e}function dt(o){let s,t="No reviews yet";return{c(){s=c("p"),s.textContent=t},l(e){s=h(e,"P",{"data-svelte-h":!0}),J(s)!=="svelte-aus518"&&(s.textContent=t)},m(e,a){re(e,s,a)},p:Me,d(e){e&&f(s)}}}function vt(o){let s,t=Ce(o[0].reviews),e=[];for(let a=0;a<t.length;a+=1)e[a]=at(tt(o,t,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=ye()},l(a){for(let _=0;_<e.length;_+=1)e[_].l(a);s=ye()},m(a,_){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(a,_);re(a,s,_)},p(a,_){if(_&1){t=Ce(a[0].reviews);let r;for(r=0;r<t.length;r+=1){const g=tt(a,t,r);e[r]?e[r].p(g,_):(e[r]=at(g),e[r].c(),e[r].m(s.parentNode,s))}for(;r<e.length;r+=1)e[r].d(1);e.length=t.length}},d(a){a&&f(s),ot(e,a)}}}function ft(o){let s,t,e;return{c(){s=c("span"),t=C("★"),this.h()},l(a){s=h(a,"SPAN",{class:!0});var _=b(s);t=k(_,"★"),_.forEach(f),this.h()},h(){u(s,"class",e=o[16]<o[4].rating?"star filled":"star")},m(a,_){re(a,s,_),l(s,t)},p(a,_){_&1&&e!==(e=a[16]<a[4].rating?"star filled":"star")&&u(s,"class",e)},d(a){a&&f(s)}}}function st(o){let s,t=o[16]<5&&ft(o);return{c(){t&&t.c(),s=ye()},l(e){t&&t.l(e),s=ye()},m(e,a){t&&t.m(e,a),re(e,s,a)},p(e,a){e[16]<5&&t.p(e,a)},d(e){e&&f(s),t&&t.d(e)}}}function at(o){let s,t,e=o[4].user_name+"",a,_,r,g,v=o[4].comment+"",T,G,P,S,D=Ce(Array(o[4].rating)),p=[];for(let i=0;i<D.length;i+=1)p[i]=st(lt(o,D,i));return{c(){s=c("div"),t=c("div"),a=C(e),_=y(),r=c("div"),g=c("p"),T=C(v),G=y(),P=c("div");for(let i=0;i<p.length;i+=1)p[i].c();S=y(),this.h()},l(i){s=h(i,"DIV",{class:!0});var d=b(s);t=h(d,"DIV",{class:!0});var n=b(t);a=k(n,e),n.forEach(f),_=E(d),r=h(d,"DIV",{class:!0});var V=b(r);g=h(V,"P",{});var K=b(g);T=k(K,v),K.forEach(f),V.forEach(f),G=E(d),P=h(d,"DIV",{class:!0});var Y=b(P);for(let Z=0;Z<p.length;Z+=1)p[Z].l(Y);Y.forEach(f),S=E(d),d.forEach(f),this.h()},h(){u(t,"class","user-name svelte-12u448d"),u(r,"class","message svelte-12u448d"),u(P,"class","rating svelte-12u448d"),u(s,"class","review svelte-12u448d")},m(i,d){re(i,s,d),l(s,t),l(t,a),l(s,_),l(s,r),l(r,g),l(g,T),l(s,G),l(s,P);for(let n=0;n<p.length;n+=1)p[n]&&p[n].m(P,null);l(s,S)},p(i,d){if(d&1&&e!==(e=i[4].user_name+"")&&X(a,e),d&1&&v!==(v=i[4].comment+"")&&X(T,v),d&1){D=Ce(Array(i[4].rating));let n;for(n=0;n<D.length;n+=1){const V=lt(i,D,n);p[n]?p[n].p(V,d):(p[n]=st(V),p[n].c(),p[n].m(P,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=D.length}},d(i){i&&f(s),ot(p,i)}}}function pt(o){let s,t,e,a,_='<img src="http://localhost:3000/api/profile/getProfilePicture?user_id=0000000001" alt="" class="house-image svelte-12u448d"/>',r,g,v,T,G,P=o[0].house_no+"",S,D,p=o[0].block_name+"",i,d,n,V,K=o[0].block_city+"",Y,Z,x,Ee,ie=o[0].rent+"",_e,ke,Te,ee,Pe,ue=o[0].house_type+"",de,Ie,te,Ne,ce=o[0].house_floor+"",ve,De,R,Oe,j,He,Q,Fe="Rent",Se,U,le,ze="Reviews",Ve,$,Re,q,A,je,I,B,Je="1 ",L,Ge="2 ",M,Ke="3 ",F,Qe="4 ",z,We="5",Ue,W,Xe="Send",qe,Ye;function Ze(m,w){return m[0].reviews&&m[0].reviews.length>0?vt:dt}let fe=Ze(o),O=fe(o);return{c(){s=c("main"),t=c("div"),e=c("div"),a=c("div"),a.innerHTML=_,r=y(),g=c("div"),v=c("div"),T=c("h2"),G=C("House Number: "),S=C(P),D=C(",House Block:"),i=C(p),d=y(),n=c("p"),V=C("Location: "),Y=C(K),Z=y(),x=c("p"),Ee=C("Price: "),_e=C(ie),ke=C(" per month"),Te=y(),ee=c("p"),Pe=C("House Type: "),de=C(ue),Ie=y(),te=c("p"),Ne=C("Floor: "),ve=C(ce),De=y(),R=c("input"),Oe=y(),j=c("input"),He=y(),Q=c("button"),Q.textContent=Fe,Se=y(),U=c("div"),le=c("h3"),le.textContent=ze,Ve=y(),$=c("div"),O.c(),Re=y(),q=c("div"),A=c("input"),je=y(),I=c("select"),B=c("option"),B.textContent=Je,L=c("option"),L.textContent=Ge,M=c("option"),M.textContent=Ke,F=c("option"),F.textContent=Qe,z=c("option"),z.textContent=We,Ue=y(),W=c("button"),W.textContent=Xe,this.h()},l(m){s=h(m,"MAIN",{class:!0});var w=b(s);t=h(w,"DIV",{class:!0});var pe=b(t);e=h(pe,"DIV",{class:!0});var me=b(e);a=h(me,"DIV",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-8tsjio"&&(a.innerHTML=_),r=E(me),g=h(me,"DIV",{class:!0});var ge=b(g);v=h(ge,"DIV",{class:!0});var N=b(v);T=h(N,"H2",{});var he=b(T);G=k(he,"House Number: "),S=k(he,P),D=k(he,",House Block:"),i=k(he,p),he.forEach(f),d=E(N),n=h(N,"P",{});var Ae=b(n);V=k(Ae,"Location: "),Y=k(Ae,K),Ae.forEach(f),Z=E(N),x=h(N,"P",{});var be=b(x);Ee=k(be,"Price: "),_e=k(be,ie),ke=k(be," per month"),be.forEach(f),Te=E(N),ee=h(N,"P",{});var Be=b(ee);Pe=k(Be,"House Type: "),de=k(Be,ue),Be.forEach(f),Ie=E(N),te=h(N,"P",{});var Le=b(te);Ne=k(Le,"Floor: "),ve=k(Le,ce),Le.forEach(f),De=E(N),R=h(N,"INPUT",{type:!0,class:!0,placeholder:!0}),Oe=E(N),j=h(N,"INPUT",{type:!0,class:!0,placeholder:!0}),N.forEach(f),He=E(ge),Q=h(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),J(Q)!=="svelte-1iwmu4z"&&(Q.textContent=Fe),ge.forEach(f),me.forEach(f),Se=E(pe),U=h(pe,"DIV",{class:!0});var se=b(U);le=h(se,"H3",{"data-svelte-h":!0}),J(le)!=="svelte-bvh3o5"&&(le.textContent=ze),Ve=E(se),$=h(se,"DIV",{class:!0});var xe=b($);O.l(xe),xe.forEach(f),Re=E(se),q=h(se,"DIV",{class:!0});var ae=b(q);A=h(ae,"INPUT",{type:!0,placeholder:!0,class:!0}),je=E(ae),I=h(ae,"SELECT",{id:!0,class:!0});var oe=b(I);B=h(oe,"OPTION",{class:!0,"data-svelte-h":!0}),J(B)!=="svelte-2obwm0"&&(B.textContent=Je),L=h(oe,"OPTION",{class:!0,"data-svelte-h":!0}),J(L)!=="svelte-vj8opa"&&(L.textContent=Ge),M=h(oe,"OPTION",{class:!0,"data-svelte-h":!0}),J(M)!=="svelte-8hnfng"&&(M.textContent=Ke),F=h(oe,"OPTION",{class:!0,"data-svelte-h":!0}),J(F)!=="svelte-1wm8xqm"&&(F.textContent=Qe),z=h(oe,"OPTION",{class:!0,"data-svelte-h":!0}),J(z)!=="svelte-tsaul4"&&(z.textContent=We),oe.forEach(f),Ue=E(ae),W=h(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),J(W)!=="svelte-1xylsc5"&&(W.textContent=Xe),ae.forEach(f),se.forEach(f),pe.forEach(f),w.forEach(f),this.h()},h(){u(a,"class","image-container svelte-12u448d"),u(R,"type","text"),u(R,"class","date-input svelte-12u448d"),u(R,"placeholder","Enter the start date here... eg: 2002/05/30"),u(j,"type","text"),u(j,"class","date-input svelte-12u448d"),u(j,"placeholder","Enter the end date here... eg: 2002/05/30"),u(v,"class","house-info svelte-12u448d"),u(Q,"class","button svelte-12u448d"),u(g,"class","info-container"),u(e,"class","house-details-container svelte-12u448d"),u($,"class","scrollable-reviews svelte-12u448d"),u(A,"type","text"),u(A,"placeholder","Enter review here..."),u(A,"class","svelte-12u448d"),B.__value="1",H(B,B.__value),u(B,"class","svelte-12u448d"),L.__value="2",H(L,L.__value),u(L,"class","svelte-12u448d"),M.__value="3",H(M,M.__value),u(M,"class","svelte-12u448d"),F.__value="4",H(F,F.__value),u(F,"class","svelte-12u448d"),z.__value="5",H(z,z.__value),u(z,"class","svelte-12u448d"),u(I,"id","type"),u(I,"class","svelte-12u448d"),o[1]===void 0&&rt(()=>o[10].call(I)),u(W,"class","svelte-12u448d"),u(q,"class","search-bar svelte-12u448d"),u(U,"class","review-container svelte-12u448d"),u(t,"class","scrollable-container svelte-12u448d"),u(s,"class","svelte-12u448d")},m(m,w){re(m,s,w),l(s,t),l(t,e),l(e,a),l(e,r),l(e,g),l(g,v),l(v,T),l(T,G),l(T,S),l(T,D),l(T,i),l(v,d),l(v,n),l(n,V),l(n,Y),l(v,Z),l(v,x),l(x,Ee),l(x,_e),l(x,ke),l(v,Te),l(v,ee),l(ee,Pe),l(ee,de),l(v,Ie),l(v,te),l(te,Ne),l(te,ve),l(v,De),l(v,R),H(R,o[2]),l(v,Oe),l(v,j),H(j,o[3]),l(g,He),l(g,Q),l(t,Se),l(t,U),l(U,le),l(U,Ve),l(U,$),O.m($,null),l(U,Re),l(U,q),l(q,A),H(A,o[4]),l(q,je),l(q,I),l(I,B),l(I,L),l(I,M),l(I,F),l(I,z),et(I,o[1],!0),l(q,Ue),l(q,W),qe||(Ye=[ne(R,"input",o[7]),ne(j,"input",o[8]),ne(Q,"click",o[5]),ne(A,"input",o[9]),ne(I,"change",o[10]),ne(W,"click",o[6])],qe=!0)},p(m,[w]){w&1&&P!==(P=m[0].house_no+"")&&X(S,P),w&1&&p!==(p=m[0].block_name+"")&&X(i,p),w&1&&K!==(K=m[0].block_city+"")&&X(Y,K),w&1&&ie!==(ie=m[0].rent+"")&&X(_e,ie),w&1&&ue!==(ue=m[0].house_type+"")&&X(de,ue),w&1&&ce!==(ce=m[0].house_floor+"")&&X(ve,ce),w&4&&R.value!==m[2]&&H(R,m[2]),w&8&&j.value!==m[3]&&H(j,m[3]),fe===(fe=Ze(m))&&O?O.p(m,w):(O.d(1),O=fe(m),O&&(O.c(),O.m($,null))),w&16&&A.value!==m[4]&&H(A,m[4]),w&2&&et(I,m[1])},i:Me,o:Me,d(m){m&&f(s),O.d(),qe=!1,it(Ye)}}}function mt(o,s,t){let{data:e}=s,a="",_="4",r="",g="",v=e.rent;function T(){fetch("http://localhost:3000/api/employee/addRentalRecord",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant_id:null,house_no:we,start_date:r,end_date:g,rent_per_month:v})}).then(d=>{if(!d.ok)throw new Error(`HTTP error! Status: ${d.status}`);return t(2,r=""),t(3,g=""),d.json()}).then(d=>{console.log("Response:",d)}).catch(d=>{console.error("Error:",d)})}async function G(){let i="Anonymous";try{const n=await fetch(`http://localhost:3000/api/user/getUserName?user_id=${$e}`);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);i=(await n.json())[0].tenant_name,console.log("Tenant Name:",i)}catch(n){console.error("Error:",n)}const d={user_id:$e,user_name:i,house_no:we,comment:a,rating:_};try{const n=await fetch("http://localhost:3000/api/review/addReview",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);console.log("Message sent successfully"),t(4,a=""),t(1,_="4")}catch(n){console.error("Error sending message:",n)}}function P(){r=this.value,t(2,r)}function S(){g=this.value,t(3,g)}function D(){a=this.value,t(4,a)}function p(){_=ht(this),t(1,_)}return o.$$set=i=>{"data"in i&&t(0,e=i.data)},[e,_,r,g,a,T,G,P,S,D,p]}class Et extends ut{constructor(s){super(),ct(this,s,mt,pt,nt,{data:0})}}export{Et as component,Ct as universal};
